<div id="ng4-chat">
    <div id="ng4-chat-people" [ngClass]="{'ng4-chat-people-collapsed':isCollapsed}">
        <a href="javascript:void(0);" class="ng4-chat-title shadowed" (click)="onChatTitleClicked($event)">
            <span>
                {{title}}
            </span>
        </a>
        <input id="ng4-chat-search_friend" type="search" placeholder="Search" [(ngModel)]="searchInput"/>
        <ul id="ng4-chat-users" *ngIf="!isCollapsed">
            <li *ngFor="let user of filteredUsers" (click)="openChatWindow(user)">
                <img alt="" class="avatar" height="30" width="30"  src="{{user.avatar}}"/>
                <strong>{{user.displayName}}</strong>
                <span class="ng4-chat-user-status"></span>
            </li>
        </ul>
    </div>
    <ul id="ng4-chat-windows">
        <li *ngFor="let window of windows" class="ng4-chat-window">
            <div class="ng4-chat-title">
                <strong>
                    {{window.chattingTo.displayName}}
                </strong>
                <a href="javascript:void(0);" class="ng4-chat-close" (click)="onCloseChatWindow(window)">X</a>
            </div>
            <div #chatMessages class="ng4-chat-messages">
                <div *ngFor="let message of window.messages; let i = index" [ngClass]="{'ng4-chat-message': true, 'ng4-chat-message-received': message.fromId != userId}">
                    <img *ngIf="isAvatarVisible(window, message, i)" alt="@rpaschoal" class="avatar" height="30" width="30" [src]="window.chattingTo.avatar" />
                    <span>
                        {{message.message}}
                    </span>
                </div>
            </div>
            <input [(ngModel)]="window.newMessage" type="text" (keypress)="onChatInputTyped($event, window)" [placeholder]="messagePlaceholder"/>
        </li>
    </ul>
</div>